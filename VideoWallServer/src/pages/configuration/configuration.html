<ion-header>
  <ion-navbar>
    <button menuToggle *ngIf="!selectedConfig">
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Configuration Details</ion-title>
  </ion-navbar>
</ion-header>

<ion-content>
  <ion-list *ngIf="selectedConfig">
    <ion-item>
      <ion-label>Active</ion-label>
      <ion-toggle [(ngModel)]="selectedConfig.active" (ngModelChange)="setActive($event)"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label>Title</ion-label>
      <ion-input type="text" [(ngModel)]="selectedConfig.title"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Width</ion-label>
      <ion-input type="number" [(ngModel)]="selectedConfig.width"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Height</ion-label>
      <ion-input type="number" [(ngModel)]="selectedConfig.height"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Framerate</ion-label>
      <ion-input type="number" [(ngModel)]="selectedConfig.framerate"></ion-input>
    </ion-item>
    <ion-item>
      <ion-label>Fullscreen</ion-label>
      <ion-toggle [(ngModel)]="selectedConfig.fullscreen"></ion-toggle>
    </ion-item>
    <ion-item>
      <ion-label>Background Color</ion-label>
      <ion-input type="number" [(ngModel)]="selectedConfig.background.r"></ion-input>
      <ion-input type="number" [(ngModel)]="selectedConfig.background.g"></ion-input>
      <ion-input type="number" [(ngModel)]="selectedConfig.background.b"></ion-input>
    </ion-item>
  </ion-list>
  <ion-grid class="videowall-grid">
    <ion-row>
      <ion-col offset-3 col-2>
        <a (click)="changeZonePlayer(0)">{{selectedConfig.zones[0]}}</a>
      </ion-col>
      <ion-col col-2>
        <a (click)="changeZonePlayer(1)">{{selectedConfig.zones[1]}}</a>
      </ion-col>      
      <ion-col col-2>
        <a (click)="changeZonePlayer(2)">{{selectedConfig.zones[2]}}</a>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col offset-3 col-2>
        <a (click)="changeZonePlayer(3)">{{selectedConfig.zones[3]}}</a>
      </ion-col>
      <ion-col col-2>
        <a (click)="changeZonePlayer(4)">{{selectedConfig.zones[4]}}</a>
      </ion-col>      
      <ion-col col-2>
        <a (click)="changeZonePlayer(5)">{{selectedConfig.zones[5]}}</a>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col offset-3 col-2>
        <a (click)="changeZonePlayer(6)">{{selectedConfig.zones[6]}}</a>
      </ion-col>
      <ion-col col-2>
        <a (click)="changeZonePlayer(7)">{{selectedConfig.zones[7]}}</a>
      </ion-col>      
      <ion-col col-2>
        <a (click)="changeZonePlayer(8)">{{selectedConfig.zones[8]}}</a>
      </ion-col>
    </ion-row>
  </ion-grid>
  <ion-list>
    <ion-item *ngFor="let player of selectedConfig.players">
      <ion-list>
        <ion-item-sliding>
          <ion-item>
            <h2>Player Id: {{player.id}}</h2>
            <p>TVs: {{getPlayerZones(player.id)}}</p>
            <p>Background: {{player.background.r}}, {{player.background.g}}, {{player.background.b}}</p>
          </ion-item>
          <ion-item-options side="right">
            <button ion-button color="danger" (click)="deletePlayer($event,player)">
              <ion-icon name="trash"></ion-icon>
              Delete
            </button>
          </ion-item-options>
        </ion-item-sliding>
      </ion-list>
      <ion-list>
        <ion-item-sliding *ngFor="let content of player.contents">
          <button ion-item (click)="openContent($event,content)">
            <ion-icon *ngIf="content.type=='image'" name="image" item-left></ion-icon>
            <ion-icon *ngIf="content.type=='video'" name="play" item-left></ion-icon>
            <ion-icon *ngIf="content.type=='web'" name="globe" item-left></ion-icon>
            <ion-icon *ngIf="content.type=='youtube'" name="youtube" item-left></ion-icon>
            <h2>{{content.load}}</h2>
            <p>{{content.type}} â€¢ {{content.loop}}</p>
          </button>
          <ion-item-options side="right">
            <button ion-button color="danger" (click)="deleteContent($event,player,content)">
              <ion-icon name="trash" small></ion-icon>
              Delete
            </button>
          </ion-item-options>
        </ion-item-sliding>
        <a ion-item (click)="addContent($event,player)">
          <ion-icon name="add" item-left></ion-icon>
          <h2>Add content</h2>
        </a>
      </ion-list>
    </ion-item>
    <a ion-item *ngIf="selectedConfig.players.length<9" (click)="addPlayer($event,selectedConfig)">
      <ion-icon name="add" item-left></ion-icon>
      <h2>New player</h2>
    </a>
  </ion-list>
</ion-content>